<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ë² ì´ìŠ¤ ì²´ì»¤</title>

  <!-- ğŸ“± ëª¨ë°”ì¼ í”„ë ˆì„(375x667) -->
  <link rel="stylesheet" href="styles-frame.css"/>

  <!-- XLSX íŒŒì„œ (ìš”ì²­ CDN) -->
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>

  <style>
    :root{
      --bg:#fff8ea; --ink:#2b261f; --muted:#6d6155; --border:#eadfc8;
      --accent:#f17b2a; --accent-d:#e0611e;
      --ok:#2e7d32; --maybe:#b07d10; --bad:#b00020;
    }

    /* ğŸ“¦ ë‚´ë¶€ ì¹´ë“œ */
    #bc_int{
      position:absolute; width:340px; height:626px;
      top:50%; left:50%; transform:translate(-50%,-50%);
      border-radius:20px; overflow:hidden;
      background:#f3c3a9; box-shadow: inset 0 0 0 2px rgba(0,0,0,0.04);
    }

    /* ìƒë‹¨ë°” */
    .topbar{
      position:absolute; top:12px; left:12px; right:12px; height:54px;
      display:flex; align-items:center; gap:8px; padding:8px 10px;
      background:#fff8f1; border:1px solid var(--border); border-radius:12px;
    }
    .topbar h1{ margin:0; font-size:14px; font-weight:800; color:#7e3106 }
    .sp{ flex:1 }
    select, .btn{
      border:1px solid var(--border); border-radius:10px; padding:8px 10px;
      background:#fff; font-weight:700; color:var(--ink); font-size:13px;
      cursor:pointer;
    }
    .btn.accent{ background:var(--accent); color:#fff; border-color:#e0a77c }
    .btn.accent:active{ transform:translateY(1px) }
    .btn.danger{
      background:#b00020; color:#fff; border-color:#eec7c7;
      font-size:10px; padding-top:12px; padding-bottom:12px;
    }
    .btn.danger:active{ transform:translateY(1px) }

    /* ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
    .content{
      position:absolute; left:12px; right:12px; top:78px; bottom:96px;
      background:#fff; border:1px solid var(--border); border-radius:14px; overflow:auto;
    }
    .row{
      display:flex; align-items:center; gap:8px; padding:10px 12px;
      border-bottom:1px dashed #f0e6d3;
    }
    .row:last-child{ border-bottom:0 }
    .w{
      font-size:15px; font-weight:800; letter-spacing:.2px;
      transition:opacity .15s ease;
    }
    /* ê¸°ë³¸ì€ 'ì•ˆë‹¤' â†’ íë¦¬ê²Œ */
    .state-ok .w{ opacity:.45 }
    .badge{
      margin-left:6px; padding:2px 8px; border-radius:999px; font-size:11px; font-weight:800;
      display:none;
    }
    .badge.maybe{ background:#fff4cf; border:1px solid #f0dfb8; color:#7a5200; }
    .badge.bad{   background:#ffd9d9; border:1px solid #f1c5c5; color:#7a0000; }

    .actions{ margin-left:auto; display:flex; gap:6px }
    .pill{
      border-radius:999px; padding:6px 10px; border:1px solid var(--border);
      background:#fff; font-weight:800; font-size:12px; cursor:pointer; user-select:none;
    }
    .pill.maybe.active{ border-color:#f0dfb8; color:var(--maybe); background:#fffaea }
    .pill.bad.active{   border-color:#f1c5c5; color:#b00020; background:#fff5f5 }

    /* í•˜ë‹¨ í‘¸í„°(í˜ì´ì§€ + ì „ì²´ ë‹¤ ëª¨ë¦„(í† ê¸€) + ìµœì¢… ì €ì¥) */
    .footer{
      position:absolute; left:12px; right:12px; bottom:12px; height:72px;
      display:flex; align-items:center; gap:10px; padding:10px;
      background:#fff8f1; border:1px solid var(--border); border-radius:12px;
      z-index: 10;
    }
    .pager{ display:flex; align-items:center; gap:8px }
    .pg-btn{ width:36px; height:36px; border-radius:10px; border:1px solid var(--border); background:#fff; font-weight:900; cursor:pointer; }
    .page-ind{ font-size:12px; color:#6d6155; min-width:80px; text-align:center; }

    .save{ margin-left:auto }

    /* ìŠ¤í¬ë¡¤ ì—ë„ˆì§€ë°” */
    .energy{
      position:absolute; left:16px; right:16px; bottom:90px;
      height:12px; border-radius:999px; overflow:hidden;   /* hintë¥¼ ë°” ë‚´ë¶€ì— í‘œì‹œ */
      background:#ffe5c8; border:1px solid #e6b98f; z-index:20;
    }
    .energy .fill{
      height:100%; width:0%;
      background:linear-gradient(90deg,#ffd08a,#f17b2a);
      border-radius:inherit; transition:width .10s linear;
    }
    .energy .pct{
      position:absolute; right:8px; top:50%; transform:translateY(-50%);
      font-size:10px; font-weight:800; color:#7e3106;
    }
    /* âœ… hintë¥¼ ë°” ë‚´ë¶€ ì¤‘ì•™ì— ê³ ì • */
    .energy .hint{
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      font-size:11px; font-weight:800; color:#7e3106; display:none;
      white-space:nowrap; pointer-events:none;
      text-shadow: 0 1px 0 rgba(255,255,255,.6);
    }

    /* ì•ˆë‚´ ë¬¸êµ¬ */
    .hint-start{ position:absolute; top:78px; left:12px; right:12px; text-align:center; color:#6d6155;
                 padding:16px 8px; font-size:12px; }
  </style>
</head>
<body>
  <div class="main-page">
    <div id="bc_int">
      <!-- ìƒë‹¨ ë°” -->
      <div class="topbar">
        <h1>ë² ì´ìŠ¤ ì²´ì»¤</h1>
        <div class="sp"></div>
        <label for="level" style="font-size:12px;color:var(--muted)">ë ˆë²¨</label>
        <select id="level">
          <option value="A1">A1</option>
          <option value="A2">A2</option>
          <option value="B1">B1</option>
          <option value="B2">B2</option>
          <option value="C1">C1</option>
        </select>
        <button id="load" class="btn accent">ë¶ˆëŸ¬ì˜¤ê¸°</button>
      </div>

      <!-- ë¦¬ìŠ¤íŠ¸ -->
      <div class="content" id="list"></div>
      <div id="empty-hint" class="hint-start">ë ˆë²¨ì„ ì„ íƒí•˜ê³  <b>ë¶ˆëŸ¬ì˜¤ê¸°</b>ë¥¼ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”.</div>

      <!-- ìŠ¤í¬ë¡¤ ì—ë„ˆì§€ë°” -->
      <div class="energy" id="energy">
        <div class="fill" id="energyFill"></div>
        <span class="pct" id="energyPct">0%</span>
        <span class="hint" id="energyHint"></span>
      </div>

      <!-- í•˜ë‹¨: í˜ì´ì§€ë„¤ì´ì…˜ + ì „ì²´ ë‹¤ ëª¨ë¦„(í† ê¸€) + ìµœì¢… ì €ì¥ -->
      <div class="footer">
        <div class="pager">
          <button class="pg-btn" id="prevPg">â—€</button>
          <div class="page-ind" id="pgInd">0 / 0</div>
          <button class="pg-btn" id="nextPg">â–¶</button>
        </div>
        <button id="markAllBad" class="btn danger">ì „ì²´ ë‹¤ ëª¨ë¦„</button>
        <button id="saveFinal" class="btn accent save">ìµœì¢… ì €ì¥</button>
      </div>
    </div>
  </div>

<script>
  /* ---------- ì„¤ì • ---------- */
  const LEVEL_FILES = { A1:'A1.xlsx', A2:'A2.xlsx', B1:'B1.xlsx', B2:'B2.xlsx', C1:'C1.xlsx' };
  const PAGE_SIZE = 100;

  /* ---------- ìƒíƒœ ---------- */
  const qs = new URLSearchParams(location.search);
  const USER_ID = qs.get('id') || 'guest';

  let WORDS = [];        // ì „ì²´ ë‹¨ì–´
  let decisions = {};    // word -> 'maybe' | 'bad' (ì—†ìœ¼ë©´ OK=ì•)
  let currentLevel = 'A1';
  let currentPage = 1;
  let totalPages = 0;

  const els = {
    list: document.getElementById('list'),
    hintStart: document.getElementById('empty-hint'),
    level: document.getElementById('level'),
    load: document.getElementById('load'),
    energyFill: document.getElementById('energyFill'),
    energyPct: document.getElementById('energyPct'),
    energyHint: document.getElementById('energyHint'),
    prevPg: document.getElementById('prevPg'),
    nextPg: document.getElementById('nextPg'),
    pgInd: document.getElementById('pgInd'),
    markAllBad: document.getElementById('markAllBad'),
    saveFinal: document.getElementById('saveFinal'),
  };

  /* ---------- ìœ í‹¸ ---------- */
  const storageKey = (lvl)=>`base_checker:${USER_ID}:${lvl}`;
  function saveTemp(){ try{ localStorage.setItem(storageKey(currentLevel), JSON.stringify({ decisions })); }catch(e){} }
  function loadTemp(lvl){
    try{
      const raw = localStorage.getItem(storageKey(lvl));
      return raw ? (JSON.parse(raw).decisions || {}) : {};
    }catch(e){ return {}; }
  }

  // ìƒì„¸ JSON ë§Œë“¤ê¸°(ìš”ì²­í•œ ìŠ¤í‚¤ë§ˆ)
  function buildDetailedJSON(){
    const items = WORDS.map((w, idx) => {
      const st = decisions[w]; // undefined|maybe|bad
      const state = !st ? 'ì•' : (st === 'maybe' ? 'í—·ê°ˆë¦¼' : 'ëª¨ë¦„');
      const page = Math.floor(idx / PAGE_SIZE) + 1; // 1-based
      const index = idx + 1; // 1-based
      return { level: currentLevel, page, index, word: w, state };
    });
    return {
      user: USER_ID,
      level: currentLevel,
      pageSize: PAGE_SIZE,
      total: WORDS.length,
      createdAt: new Date().toISOString(),
      items
    };
  }

  /* ---------- iOS ì¹œí™” txt ë‹¤ìš´ë¡œë“œ ìœ í‹¸ (íŒŒì¼ëª…: Base Checker _ ì•„ì´ë”” _ ë ˆë²¨.txt) ---------- */
  function downloadDetailFileTxt(obj){
    const str = JSON.stringify(obj, null, 2);
    const fileName = `Base Checker _ ${obj.user} _ ${obj.level}.txt`; // â† ìš”ì²­ íŒŒì¼ëª… í˜•ì‹

    const ua = navigator.userAgent;
    const isIOS   = /iPad|iPhone|iPod/i.test(ua);
    // ëŒ€í‘œ ì¸ì•±/WKWebView íŒ¨í„´ (ì¸ì•±ì€ download ë¬´ì‹œ ë¹ˆë²ˆ)
    const isInApp = /(FBAN|FBAV|Instagram|KAKAOTALK|NAVER|Daum|CriOS|FxiOS|EdgiOS|GSA)/i.test(ua) && !/Safari/i.test(ua);

    if (isIOS && isInApp) {
      const dataUrl = 'data:text/plain;charset=utf-8,' + encodeURIComponent(str);
      window.open(dataUrl, '_blank'); // ë¯¸ë¦¬ë³´ê¸° â†’ ê³µìœ  ì‹œíŠ¸ â†’ "íŒŒì¼ì— ì €ì¥"
      return;
    }

    try{
      const blob = new Blob([str], { type:'text/plain' });
      const url  = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = fileName;
      document.body.appendChild(a); a.click();
      setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 1200);
    }catch(e){
      const dataUrl = 'data:text/plain;charset=utf-8,' + encodeURIComponent(str);
      window.open(dataUrl, '_blank');
    }
  }

  // âœ… ëŒ€ê¸°ì—´ì— basechecker íƒ€ì…ìœ¼ë¡œ ë“±ë¡(ì—…ë¡œë“œ ì‹œ .txtë¡œ ì „ì†¡í•  ì›ë³¸ JSON ë¬¸ìì—´ì„ ì €ì¥)
  function queueBaseCheckerPending(jsonObj){
    const bcKey = `BaseCheckerResults:${USER_ID}:${currentLevel}`; // ì›ë³¸ JSON ë¬¸ìì—´ ì €ì¥ í‚¤
    localStorage.setItem(bcKey, JSON.stringify(jsonObj));          // ê·¸ëŒ€ë¡œ ì €ì¥

    const pending = JSON.parse(localStorage.getItem('PendingUploads') || '[]');
    const exists = pending.some(p => p.HWType==='basechecker' && p.UserId===USER_ID && p.Level===currentLevel);
    if(!exists){
      pending.push({
        UserId: USER_ID,
        Subcategory: 'ë² ì´ìŠ¤ì²´ì»¤',
        HWType: 'basechecker',     // ì œì¶œ í˜ì´ì§€ì—ì„œ ì´ íƒ€ì…ì„ ê°ì§€í•´ .txtë¡œ ì—…ë¡œë“œ(ë‚´ìš©ì€ JSON ë¬¸ìì—´)
        Level: currentLevel,
        LessonNo: 0,
        comment: `${currentLevel} ê²°ê³¼(JSON txt)`,
        detail: `ì´ ${jsonObj.total}ê°œ`,
        BCKey: bcKey,
        timestamp: new Date().toISOString()
      });
      localStorage.setItem('PendingUploads', JSON.stringify(pending));
    }
  }

  // âœ¨ ìµœì¢… ì €ì¥: JSON ìƒì„± â†’ ëŒ€ê¸°ì—´ ë“±ë¡ + ë¡œì»¬ TXT ë‹¤ìš´ë¡œë“œ(ìš”ì²­ íŒŒì¼ëª… ê·œì¹™)
  function saveFinal(){
    const data = buildDetailedJSON();
    try{
      queueBaseCheckerPending(data);   // ì œì¶œ ëŒ€ê¸°ë¦¬ìŠ¤íŠ¸ ë“±ë¡ (HWType: basechecker)
      downloadDetailFileTxt(data);     // ë¡œì»¬ì—ë„ .txtë¡œ ì €ì¥ (Base Checker _ ì•„ì´ë”” _ ë ˆë²¨.txt)
      alert('ìµœì¢… ì €ì¥ ì™„ë£Œ! (ëŒ€ê¸°ì—´ ë“±ë¡ + TXT ë‹¤ìš´ë¡œë“œ)');
    }catch(e){
      alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
  }

  /* ---------- ì—ë„ˆì§€ë°” & íŒíŠ¸ ---------- */
  let _raf = 0, hintTimer = null, hintStep = 1;
  function startNextHint(){
    clearNextHint();
    if(currentPage === totalPages){
      // ë§ˆì§€ë§‰ í˜ì´ì§€: ê³ ì • ë©”ì‹œì§€
      els.energyHint.style.display = 'inline';
      els.energyHint.textContent = 'ìµœì¢… ì €ì¥ click â¬‡';
      return;
    }
    els.energyHint.style.display = 'inline';
    els.energyHint.textContent = 'next page >';
    hintStep = 1;
    hintTimer = setInterval(()=>{
      hintStep = hintStep % 3 + 1; // 1â†’2â†’3â†’1
      els.energyHint.textContent = 'next page ' + '>'.repeat(hintStep);
    }, 500);
  }
  function clearNextHint(){
    if(hintTimer){ clearInterval(hintTimer); hintTimer = null; }
    els.energyHint.style.display = 'none';
  }
  function updateEnergyBar(){
    const sc = els.list.scrollTop;
    const max = Math.max(1, els.list.scrollHeight - els.list.clientHeight);
    const pct = Math.min(100, Math.round((sc / max) * 100));
    els.energyFill.style.width = pct + '%';
    els.energyPct.textContent = pct + '%';

    const nearBottom = sc >= max - 2;
    if(nearBottom) startNextHint(); else clearNextHint();
  }
  els.list.addEventListener('scroll', () => {
    if (_raf) return;
    _raf = requestAnimationFrame(() => { updateEnergyBar(); _raf = 0; });
  });

  function pageSlice(page){
    const start = (page-1) * PAGE_SIZE;
    return WORDS.slice(start, start + PAGE_SIZE);
  }

  /* ---------- ì—‘ì…€ ë¡œë”© (ìˆœì„œ ìœ ì§€) ---------- */
  async function fetchWords(filePath){
    const res = await fetch(filePath);
    if(!res.ok) throw new Error('ì—‘ì…€ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
    const ab = await res.arrayBuffer();
    const wb = XLSX.read(ab, { type:'array' });
    const ws = wb.Sheets[wb.SheetNames[0]];
    const rows = XLSX.utils.sheet_to_json(ws, { header:1, blankrows:false });

    // í—¤ë” íƒì§€
    const header = rows[0] || [];
    const lower = header.map(v => (v ?? '').toString().trim().toLowerCase());
    const headerCandidates = ['word','ë‹¨ì–´','english','eng','vocab','vocabulary','í‘œì œì–´'];
    let col = lower.findIndex(h => headerCandidates.includes(h));
    let startRow = (col >= 0) ? 1 : 0;

    if(col < 0){
      // ë¬¸ìì—´ì´ ê°€ì¥ ë§ì€ ì—´ ì„ íƒ
      const maxCols = rows.reduce((m,r)=>Math.max(m, r.length), 0);
      let bestIdx = 0, bestScore = -1;
      for(let c=0;c<maxCols;c++){
        let score = 0;
        for(let r=0;r<Math.min(rows.length, 50); r++){
          const v = rows[r]?.[c];
          if(typeof v === 'string' && v.trim()) score++;
        }
        if(score > bestScore){ bestScore=score; bestIdx=c; }
      }
      col = bestIdx;
    }

    const out = [];
    for(let r=startRow; r<rows.length; r++){
      const v = rows[r]?.[col];
      const s = (v ?? '').toString().trim();
      if(s) out.push(s);
    }
    return out; // ì…”í”Œ ì—†ì´ ê·¸ëŒ€ë¡œ
  }

  /* ---------- í† ê¸€ ë²„íŠ¼ ìƒíƒœ ---------- */
  function isCurrentPageAllBad(){
    const words = pageSlice(currentPage);
    if(words.length === 0) return false;
    return words.every(w => decisions[w] === 'bad');
  }
  function updateMarkAllButton(){
    els.markAllBad.textContent = isCurrentPageAllBad() ? 'ì·¨ì†Œ (ë¡¤ë°±)' : 'ì „ì²´ ë‹¤ ëª¨ë¦„';
  }

  /* ---------- ë Œë”ë§ ---------- */
  function renderPage(page){
    els.list.innerHTML = '';
    const words = pageSlice(page);
    words.forEach(w=>{
      const st = decisions[w]; // undefined(OK) | 'maybe' | 'bad'
      const row = document.createElement('div');
      row.className = 'row ' + (st ? '' : 'state-ok'); // ê¸°ë³¸ OKëŠ” íë¦¬ê²Œ
      row.dataset.word = w;

      const span = document.createElement('span'); span.className = 'w'; span.textContent = w;

      const badge = document.createElement('span');
      badge.className = 'badge ' + (st || '');
      if(st){ badge.style.display='inline-block'; badge.textContent = (st==='maybe'?'í—·ê°ˆë¦¼':'ëª¨ë¥¸ë‹¤'); }

      const actions = document.createElement('div'); actions.className = 'actions';

      // â€˜í—·ê°ˆë¦¼â€™ / â€˜ëª¨ë¦„â€™ ë‘ ë²„íŠ¼ë§Œ. ë‹¤ì‹œ ëˆ„ë¥´ë©´ í•´ì œë˜ì–´ OK(ì•ˆë‹¤)ë¡œ ë³µê·€.
      const bMaybe = document.createElement('button');
      bMaybe.textContent = 'í—·ê°ˆë¦¼'; bMaybe.className = 'pill maybe' + (st==='maybe'?' active':'');
      bMaybe.addEventListener('click', ()=>{
        if(decisions[w] === 'maybe'){
          delete decisions[w];
          row.classList.add('state-ok'); badge.style.display='none'; bMaybe.classList.remove('active');
        }else{
          decisions[w] = 'maybe';
          row.classList.remove('state-ok'); badge.className='badge maybe'; badge.textContent='í—·ê°ˆë¦¼'; badge.style.display='inline-block';
          bBad.classList.remove('active'); bMaybe.classList.add('active');
        }
        saveTemp(); updateMarkAllButton();
      });

      const bBad = document.createElement('button');
      bBad.textContent = 'ëª¨ë¦„'; bBad.className = 'pill bad' + (st==='bad'?' active':'');
      bBad.addEventListener('click', ()=>{
        if(decisions[w] === 'bad'){
          delete decisions[w];
          row.classList.add('state-ok'); badge.style.display='none'; bBad.classList.remove('active');
        }else{
          decisions[w] = 'bad';
          row.classList.remove('state-ok'); badge.className='badge bad'; badge.textContent='ëª¨ë¥¸ë‹¤'; badge.style.display='inline-block';
          bMaybe.classList.remove('active'); bBad.classList.add('active');
        }
        saveTemp(); updateMarkAllButton();
      });

      actions.append(bMaybe, bBad);
      row.append(span, badge, actions);
      els.list.appendChild(row);
    });

    // ìŠ¤í¬ë¡¤ ì´ˆê¸°í™” + ì—ë„ˆì§€ë°” + í† ê¸€ë²„íŠ¼ ë¼ë²¨
    els.list.scrollTop = 0;
    updateEnergyBar();
    updateMarkAllButton();
  }

  function applyPaging(){
    totalPages = Math.max(1, Math.ceil(WORDS.length / PAGE_SIZE));
    currentPage = Math.min(currentPage, totalPages);
    els.pgInd.textContent = `${currentPage} / ${totalPages}`;
    els.prevPg.disabled = (currentPage<=1);
    els.nextPg.disabled = (currentPage>=totalPages);
    renderPage(currentPage);
  }

  /* ---------- ì¼ê´„ ì ìš©(í† ê¸€: ëª¨ë‘ ëª¨ë¦„ â†” ëª¨ë‘ ì•) ---------- */
  function toggleCurrentPageAllBad(){
    const words = pageSlice(currentPage);
    const allBad = words.length>0 && words.every(w => decisions[w] === 'bad');
    if(allBad){
      // ì´ˆê¸°í™”: ëª¨ë‘ 'ì•'(OK)ìœ¼ë¡œ
      words.forEach(w => { delete decisions[w]; });
    }else{
      // ëª¨ë‘ 'ëª¨ë¦„'ìœ¼ë¡œ
      words.forEach(w => { decisions[w] = 'bad'; });
    }
    saveTemp();
    renderPage(currentPage); // ë¼ë²¨/í–‰/ë²„íŠ¼ìƒíƒœ ì¼ê´„ ë°˜ì˜
  }

  /* ---------- ì´ë²¤íŠ¸ ---------- */
  els.level.addEventListener('change', e => currentLevel = e.target.value);

  els.load.addEventListener('click', async ()=>{
    try{
      WORDS = await fetchWords(LEVEL_FILES[currentLevel]);   // ìˆœì„œ ê·¸ëŒ€ë¡œ
      decisions = loadTemp(currentLevel);                    // ì €ì¥ëœ ì„ íƒ ë³µì›
      els.hintStart.style.display = 'none';
      currentPage = 1;
      applyPaging();
    }catch(err){ alert(err.message || 'ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨'); }
  });

  els.prevPg.addEventListener('click', ()=>{ if(currentPage>1){ saveTemp(); currentPage--; applyPaging(); }});
  els.nextPg.addEventListener('click', ()=>{ if(currentPage<totalPages){ saveTemp(); currentPage++; applyPaging(); }});

  els.markAllBad.addEventListener('click', toggleCurrentPageAllBad);
  els.saveFinal.addEventListener('click', saveFinal);

  // ì´ˆê¸° ìƒíƒœ
  (function init(){
    currentLevel = els.level.value;
    // ì•ˆë‚´ë§Œ í‘œì‹œ
  })();
</script>
</body>
</html>
